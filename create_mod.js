const productX = {
  type: "typeA",
  modPrime: true,
  numOfcolors: 4,
  numOfphotos: 4,
  mediaSrc: "/media_assets/test/checks/",
  carrentColor: 3,
  carrentimgNum: 1,
  sizeTable: {
    head: ["Ù…Ù‚Ø§Ø³", "Ø§Ù„ØµØ¯Ø±", "Ø§Ù„Ø®ØµØ±", "Ø§Ù„Ø·ÙˆÙ„"],
    rows: [
      ["L", "50 CM", "60 CM", "70 CM"],
      ["XL", "80 CM", "90 CM", "100 CM"],
      ["2XL", "110 CM", "120 CM", "130 CM"],
      ["3XL", "105 CM", "107 CM", "180 CM"],
      ["4XL", "100 CM", "100 CM", "150 CM"],
      ["5XL", "100 CM", "140 CM", "111 CM"],
    ],
  },
  details: {
    imgsrc: "media_assets/test/1.png",
    title: "Ø¬Ø§Ù…Ø¨ Ø³ÙˆØª",
    subtitle: "Ø¬Ø§Ù…Ø¨ Ø³ÙˆØª Ø¬Ø§Ù…Ø¨ Ø³ÙˆØª",
    paragraph:
      "Ø§ÙØ¶Ù„ Ø®Ø§Ù…Ø§Øª Ø§Ù„Ù‚Ø·Ù† - Ù…ÙŠÙ„ØªÙˆÙ† ğŸ”¥ğŸ”¥ Ø¹Ø§Ù„Ù‰ Ø§Ù„Ø¬ÙˆØ¯Ø©â˜ï¸ â˜ï¸ ÙØ±ØµØ© Ø¨Ø¬Ø¯âœ¨Ù‚Ø¨Ù„ Ø§Ø³Ø¹Ø§Ø± Ø§Ù„Ø´ØªØ§Ø¡  Ù…Ù† Ø­Ø¯ÙŠØ« Ø§Ù„ÙˆÙ„Ø§Ø¯Ø© Ø­ØªÙ‰ Ø¹Ù…Ø± Ø³Ù†ØªÙŠÙ†",
    crossedPrice: 100,

    price: 570,
    colors: ["#00ffff", "#00ff5e", "#ff00bb"],
  },
  mod: {
    section1: {
      clo1: { type: "sizeTable" },
      clo2: {
        type: "text",
        details: {
          title: "1Ø¬Ø§Ù…Ø¨ Ø³ÙˆØª",
          subTitle: "Ø¬Ø§Ù…Ø¨ Ø³ÙˆØª Ø¬Ø§Ù…Ø¨ Ø³ÙˆØª",
          paragraph:
            "Ø§ÙØ¶Ù„ Ø®Ø§Ù…Ø§Øª Ø§Ù„Ù‚Ø·Ù† - Ù…ÙŠÙ„ØªÙˆÙ† ğŸ”¥ğŸ”¥ Ø¹Ø§Ù„Ù‰ Ø§Ù„Ø¬ÙˆØ¯Ø©â˜ï¸ â˜ï¸ ÙØ±ØµØ© Ø¨Ø¬Ø¯âœ¨Ù‚Ø¨Ù„ Ø§Ø³Ø¹Ø§Ø± Ø§Ù„Ø´ØªØ§Ø¡  Ù…Ù† Ø­Ø¯ÙŠØ« Ø§Ù„ÙˆÙ„Ø§Ø¯Ø© Ø­ØªÙ‰ Ø¹Ù…Ø± Ø³Ù†ØªÙŠÙ†",
        },
      },
    },
    section2: {
      clo1: {
        type: "img",
        details: {
          imgsrc: "media_assets/test/1.png",
        },
      },
      clo2: {
        type: "text",
        details: {
          title: "Ø¬Ø§Ù…Ø¨ Ø³ÙˆØª",
          subTitle: "Ø¬Ø§Ù…Ø¨ Ø³ÙˆØª Ø¬Ø§Ù…Ø¨ Ø³ÙˆØª",
          paragraph:
            "Ø§Ù„Ø®Ø§Ù…Ø© Ø¹Ø´Ø±Ø© Ø¹Ù„Ù‰ Ø¹Ø´Ø±Ø© Ùˆ Ø´ÙˆÙŠØ© ÙƒÙ„Ø§Ù… ØªÙ…Ø§Ù… Ø¨Ø®ØµÙˆØµ Ø§Ù„Ù…Ù†ØªØ¬ ÙˆÙƒØ¯Ø© - Ù…Ø¹ Ø¹Ø±Ø¶ ÙˆØ¨ØªØ§Ø¹ Ùˆ Ø§Ù‰ Ø­ÙˆØ§Ø± ÙÙ‰Ø³Ø·Ø±ÙŠÙ† ÙˆØ§Ù„Ø³Ù„Ø§Ù… ÙˆØ§Ø­Ù†Ø§ Ø¬Ø§ÙŠÙŠÙ† Ù†Ø¹Ù…Ù„ Ù‚Ù„Ø¨Ø§Ù† ÙˆÙ†Ù…Ø´Ù‰ ÙˆØ¨Ù„Ø§Ø´ Ø§Ù†Ø¯Ù‡Ø§Ø´ Ø¹Ù„Ø´Ø§Ù† Ø§Ù„ØªÙ‚ÙŠÙ„ Ù„Ø³Ù‡ Ù…Ø¬Ø§Ø´ Ø§ÙˆÙ‰ Ù‡Ø±Ù‰ ÙˆØ®Ù„Ø§Øµ ",
        },
      },
    },
    section3: {
      clo1: {
        type: "img",
        details: {
          imgsrc: "media_assets/test/sub/1.png",
          isRound: true,
          figcaption: "Ø£Ù†ÙŠÙ‚ -- Ù…Ø±ÙŠØ­ -- ÙˆØ¹Ù…Ù„Ù‰",
        },
      },
      clo2: {
        type: "img",
        details: {
          imgsrc: "media_assets/test/sub/2.png",
          isRound: true,
          figcaption: "Ø£Ù†ÙŠÙ‚ -- Ù…Ø±ÙŠØ­ -- ÙˆØ¹Ù…Ù„Ù‰",
        },
      },
      clo3: {
        type: "img",
        details: {
          imgsrc: "media_assets/test/sub/3.png",
          isRound: true,
          figcaption: "Ø£Ù†ÙŠÙ‚ -- Ù…Ø±ÙŠØ­ -- ÙˆØ¹Ù…Ù„Ù‰",
        },
      },
    },
  },
};
const productXX = {
  type: "typeB",

  details: {
    imgsrc: "media_assets/test/9.png",
    title: "Ø¬Ø§Ù…Ø¨ Ø³ÙˆØª",
    subtitle: "Ø¬Ø§Ù…Ø¨ Ø³ÙˆØª Ø¬Ø§Ù…Ø¨ Ø³ÙˆØª",
    crossedPrice: 100,
    price: 570,
  },
  mod: {
    section1: {
      clo1: {
        type: "img",
        details: {
          imgsrc: "media_assets/test/9.png",
          isRound: true,
          figcaption: "Ø£Ù†ÙŠÙ‚ -- Ù…Ø±ÙŠØ­ -- ÙˆØ¹Ù…Ù„Ù‰",
        },
      },
      clo2: {
        type: "text",
        details: {
          title: "Ù…Ø§Ø³Ùƒ Ø³ØªØ§Ø±ÙƒÙŠâœ¨",
          subTitle: "ÙŠØ²ÙŠÙ„ Ø§Ù„Ø¬Ù„Ø¯ Ø§Ù„Ù…ÙŠØª ÙˆÙŠØ¬Ø¯Ø¯ Ø®Ù„Ø§ÙŠØ§ Ø§Ù„ÙˆØ¬Ù‡ ğŸ‘ˆ",
          paragraph:
            "Ù…Ø§Ø³Ùƒ Ø³ØªØ§Ø±ÙƒÙŠ Ù‚Ù†Ø§Ø¹ Ù„Ù„Ø¨Ø´Ø±Ù‡ ÙŠØ²ÙŠÙ„ Ø§Ù„Ø¬Ù„Ø¯ Ø§Ù„Ù…ÙŠØª ÙˆÙŠØ¬Ø¯Ø¯ Ø®Ù„Ø§ÙŠØ§Ø§Ù„ÙˆØ¬Ù‡ Ùˆ ÙŠÙ‚ÙˆÙ… Ø¨ØªÙØªÙŠØ­ Ø§Ù„Ø¨Ø´Ø±Ù‡ Ùˆ ÙŠØ²ÙŠÙ„ Ø§Ù„Ø±Ø¤ÙˆØ³ Ø§Ù„Ø³ÙˆØ¯Ø§Ø¡ ğŸ˜Š",
        },
      },
    },
    section2: {
      clo1: {
        type: "img",
        details: {
          imgsrc: "media_assets/test/starky/1.png",
          isRound: true,
          figcaption: "ÙŠÙ‚ÙˆÙ… Ø¨ØªÙØªÙŠØ­ Ù„ÙˆÙ† Ø§Ù„Ø¨Ø´Ø±Ø© Ø®Ù„Ø§Ù„ 15 Ø¯Ù‚ÙŠÙ‚Ø© ÙÙ‚Ø·ğŸ•“ğŸ•“",
        },
      },
      clo2: {
        type: "text",
        details: {
          title: "Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¥Ø³ØªØ®Ø¯Ø§Ù… ğŸ‘‡ğŸ‘‡",
          paragraph:
            "Ø¨Ø¹Ø¯ Ø§Ù„ØªÙ†Ø¸ÙŠÙ Ø¶Ø¹ÙŠ Ù…Ù†Ø´ÙØ© Ø³Ø§Ø®Ù†Ø© Ù„Ù…Ø¯Ø© Ø®Ù…Ø³ Ø¯Ù‚Ø§Ø¦Ù‚ Ù„ÙØªØ­ Ø§Ù„Ù…Ø³Ø§Ù…Ø§Øª Ø§Ù„ÙˆØ¬Ø© Ø«Ù… Ø¶Ø¹ÙŠ Ø§Ù„Ù‚Ù†Ø§Ø¹ Ù…Ù† Ø§Ø¹Ù„ÙŠ Ø§Ù„ÙŠ Ø§Ø³ÙÙ„ Ø§ØªØ±ÙƒÙŠÙ‡ 15 Ø¯Ù‚ÙŠÙ‚Ø© Ø§Ùˆ Ø­ØªÙŠ ÙŠØ¬Ù Ø§Ù„Ù‚Ù†Ø§Ø¹ Ø«Ù… ØªØªÙ… Ø¥Ø²Ø§Ù„ØªÙ‡ Ù…Ù† Ø£Ø³ÙÙ„ Ø¥Ù„Ù‰ Ø£Ø¹Ù„Ù‰ ",
        },
      },
    },
    section3: {
      clo1: {
        type: "img",
        details: {
          imgsrc: "media_assets/test/starky/3.png",
          figcaption:
            "Ø±Ø§Ø¦Ø¹ ÙÙŠ ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨Ø´Ø±Ø© ÙˆØ§Ø²Ø§Ù„Ø© Ø§Ø«Ø§Ø± Ø§Ù„Ø­Ø¨ÙˆØ¨ ÙˆØ§Ù„Ø¨Ø«ÙˆØ± Ø§Ù„Ø³ÙˆØ¯Ø§Ø¡ ğŸ˜ğŸ˜ğŸ’¯",
        },
      },
      clo2: {
        type: "text",
        details: {
          paragraph:
            " ÙŠØ±Ø·Ø¨ Ø§Ù„Ø¨Ø´Ø±Ø© Ù„ØªØµØ¨Ø­ Ù†Ù‚ÙŠØ© ÙˆÙ†Ø§Ø¹Ù…Ø© ÙˆÙ…Ø´Ø±Ù‚Ø© ÙˆØ®Ø§Ù„ÙŠØ© Ù…Ù† Ø§Ù„Ø´ÙˆØ§Ø¦Ø¨ ÙˆØ§Ù„Ø¯Ù‡ÙˆÙ† Ø§Ù„Ø¹Ø§Ù„Ù‚Ø©ğŸŒºğŸ’ğŸ»â€â™€ï¸",
        },
      },
    },
    section4: {
      clo1: {
        type: "img",
        details: {
          imgsrc: "media_assets/test/starky/2.png",
          figcaption: "ÙŠÙ†ØµØ­ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡ Ù…Ø±ØªÙŠÙ† Ø£Ø³Ø¨ÙˆØ¹ÙŠØ§âœŒğŸ»",
        },
      },
      clo2: {
        type: "img",
        details: {
          imgsrc: "media_assets/test/starky/4.png",
          figcaption: "ØªØ¯ÙˆÙ… Ù†ØªØ§Ø¦Ø¬Ù‡ Ù…Ø¹ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ğŸ˜‰",
        },
      },
    },
  },
};
const productV = {
  type: "typeC",
  details: {
    imgsrc: "media_assets/test/55.png",
    title: "Ø¬Ø§Ù…Ø¨ Ø³ÙˆØª",
    price: 570,
  },
  mod: {
    section1: {
      clo1: {
        type: "img",
        details: {
          imgsrc: "media_assets/test/55.png",
          isRound: true,
        },
      },
      clo2: {
        type: "text",
        details: {
          title: "Ø£Ø³ÙƒØ±Ø§Ù†Ø´ÙŠ Ù‚Ø·Ù†âœ¨",
          subTitle: "Ø¹Ù„Ø¨Ø© ğŸ‘ˆ 100 Ù‚Ø·Ø¹Ø© Ø£Ø±Ø¨Ø·Ø© Ø´Ø¹Ø± Ù…Ø±Ù†Ø© Ù…ØªØ¹Ø¯Ø¯Ø© Ø§Ù„Ø£Ù„ÙˆØ§Ù†",
          paragraph:
            "Ø±Ø¨Ø·Ø© Ø´Ø¹Ø± Ù‚Ø·Ù†ÙŠØ© Ù†Ø§Ø¹Ù…Ø© - ØµØºÙŠØ±Ø© Ø£Ù†ÙŠÙ‚Ø© - Ù„Ø·ÙŠÙØ© Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø¹Ø±ØŒ Ù…Ø±ÙˆÙ†Ø© Ø¹Ø§Ù„ÙŠØ©ØŒ Ù…Ø«Ø§Ù„ÙŠØ© Ù„Ù„ØªØµÙÙŠÙ Ùˆ Ø§ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª Ø§Ù„Ø´Ø¹Ø± Ù„Ù„ÙØªÙŠØ§Øª ÙˆÙ„Ù„Ù†Ø³Ø§Ø¡",
        },
      },
    },
  },
};

function renderMod(product) {
  // Retrieve templates for the main layout
  const modTemp = document
    .querySelector(`[data-type="modal-elements-temp"]`)
    .content.cloneNode(true);
  const modal = modTemp.querySelector(`[data-type="mod"]`);
  const sectionsContainer = modTemp.querySelector(
    `[data-type="sections-container"]`
  );
  const modBody = modal.querySelector(`[data-type="mod-body"]`);
  const modCard = modal.querySelector(`[data-type="mod-card"]`);
  modal.setAttribute("product", `mod_${product.id}`);

  // Create a DocumentFragment to hold the cloned content and minimize reflows
  const fragment = document.createDocumentFragment();

  modal.classList.add(viewType);

  if (product.mod && product.modPrime) {
    renderModPrime(product, modBody);
  }

  modBody.appendChild(sectionsContainer);
  renderModSection(product, modBody, modTemp);
  createModFooter(product.details, modTemp, modCard);

  // Append the populated modal to the fragment
  fragment.appendChild(modal);
  modal.classList.add("is-active");

  // Append the fragment to the body in one operation to minimize reflows
  document.body.appendChild(fragment);

  // Select the modal and the exit button
  const mod = document.querySelector(`[product="mod_${product.id}"]`);
  const exit = mod.querySelector(`[data-id="exit"]`);

  // Set up event listeners after the content is appended to the DOM
  addClickListenerToExit(exit, mod);
}

function addClickListenerToExit(element, mod) {
  // Attach a click event listener to the exit button
  element.addEventListener("click", function () {
    exitMod(mod);
  });
}

function exitMod(mod) {
  mod.classList.remove("is-active");
  document.body.removeChild(mod); // Optionally remove the modal after closing
}

// Placeholder function as mentioned in the prompt
